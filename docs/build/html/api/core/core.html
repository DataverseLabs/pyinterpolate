
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Core data structures &#8212; pyinterpolate 1.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=8d563738"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/core/core';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Distance" href="../distance/distance.html" />
    <link rel="prev" title="API" href="../api.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">pyinterpolate 1.0.0 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../setup/setup.html">
    Setup
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage/quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage/tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage/learning_materials.html">
    Learning Materials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../science/citation.html">
    Citation
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../science/bibliography.html">
    Bibliography
  </a>
</li>


<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="../api.html">
    API
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../setup/setup.html">
    Setup
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage/quickstart.html">
    Quickstart
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage/tutorials.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../usage/learning_materials.html">
    Learning Materials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../science/citation.html">
    Citation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../science/bibliography.html">
    Bibliography
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../api.html">
    API
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Core data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distance/distance.html">Distance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../semivariogram/experimental.html">Experimental Semivariance and Covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../semivariogram/theoretical.html">Theoretical Semivariogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../semivariogram/indicator.html">Indicator Semivariogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../semivariogram/deconvolution.html">Semivariogram Deconvolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kriging/point_kriging.html">Point Kriging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kriging/block_kriging.html">Block and Poisson Kriging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../idw/idw.html">Inverse Distance Weighting (IDW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluate/evaluate.html">Models evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">Pipelines (Automated Poisson Kriging)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../viz/raster.html">Visualization</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../api.html" class="nav-link">API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Core data structures</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="core-data-structures">
<h1>Core data structures<a class="headerlink" href="#core-data-structures" title="Link to this heading">#</a></h1>
<section id="blocks">
<h2>Blocks<a class="headerlink" href="#blocks" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyinterpolate.</span></span><span class="sig-name descname"><span class="pre">Blocks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GeoDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_column_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geometry'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representative_points_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representative_points_from_centroid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">representative_points_from_random_sample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distances_between_representative_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angles_between_representative_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Class represents aggregated blocks data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ds</strong><span class="classifier">gpd.GeoDataFrame</span></dt><dd><p>Dataset with block values.</p>
</dd>
<dt><strong>value_column_name</strong><span class="classifier">Any</span></dt><dd><p>Name of the column with block rates.</p>
</dd>
<dt><strong>geometry_column_name</strong><span class="classifier">Any, default = ‘geometry’</span></dt><dd><p>Name of the column with a block geometry.</p>
</dd>
<dt><strong>index_column_name</strong><span class="classifier">Any, optional</span></dt><dd><p>Name of the indexing column.</p>
</dd>
<dt><strong>representative_points_column_name</strong><span class="classifier">Any, optional</span></dt><dd><p>The column with representative points or coordinates.</p>
</dd>
<dt><strong>representative_points_from_centroid</strong><span class="classifier">bool, default = False</span></dt><dd><p>Calculate representative points from block centroids.</p>
</dd>
<dt><strong>representative_points_from_random_sample</strong><span class="classifier">bool, default = False</span></dt><dd><p>Calculate representative points from the point sampled from block
geometry.</p>
</dd>
<dt><strong>distances_between_representative_points</strong><span class="classifier">bool, default = True</span></dt><dd><p>Calculate distances between representative points during class
initialization.</p>
</dd>
<dt><strong>angles_between_representative_points</strong><span class="classifier">bool, default = False</span></dt><dd><p>Calculate angles between representative points during class
initialization.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>ds</strong><span class="classifier">gpd.GeoDataFrame</span></dt><dd><p>Dataset with block values.</p>
</dd>
<dt><strong>value_column_name</strong><span class="classifier">Any</span></dt><dd><p>Name of the column with block rates.</p>
</dd>
<dt><strong>geometry_column_name</strong><span class="classifier">Any, default = ‘geometry’</span></dt><dd><p>Name of the column with a block geometry.</p>
</dd>
<dt><strong>index_column_name</strong><span class="classifier">Any, optional</span></dt><dd><p>Name of the indexing column.</p>
</dd>
<dt><strong>rep_points_column_name</strong><span class="classifier">Any, optional</span></dt><dd><p>The column with representative points or coordinates.</p>
</dd>
<dt><strong>angles</strong><span class="classifier">numpy array</span></dt><dd><p>Angles between the blocks representative points.</p>
</dd>
<dt><strong>distances</strong><span class="classifier">numpy array</span></dt><dd><p>Distances between the blocks representative points.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>block_indexes()</strong></p></td>
<td><p>Block indexes as numpy array.</p></td>
</tr>
<tr class="row-even"><td><p><strong>block_representative_points()</strong></p></td>
<td><p>Representative points - lon, lat as numpy array.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>block_values()</strong></p></td>
<td><p>Block values as numpy array.</p></td>
</tr>
<tr class="row-even"><td><p><strong>block_coordinates(block_id)</strong></p></td>
<td><p>Single block representative point.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>block_real_value(block_id)</strong></p></td>
<td><p>Single block observation.</p></td>
</tr>
<tr class="row-even"><td><p><strong>calculate_angles_between_rep_points()</strong></p></td>
<td><p>Angles between blocks, calculated as angles between each representative point and others. If <code class="docutils literal notranslate"><span class="pre">update</span></code> is True then it updates <code class="docutils literal notranslate"><span class="pre">angles</span></code> attribute. Returns dictionary with block index as a key and angles to other blocks ordered the same way as dictionary keys as values.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>calculate_distances_between_rep_points()</strong></p></td>
<td><p>Distances between blocks, calculated as distances between each representative point and others. If <code class="docutils literal notranslate"><span class="pre">update</span></code> is set to True then it updates <code class="docutils literal notranslate"><span class="pre">distances</span></code> attribute. Returns Data Frame with block indexes as columns and indexes and distances as values.</p></td>
</tr>
<tr class="row-even"><td><p><strong>get_blocks_values()</strong></p></td>
<td><p>Get multiple blocks values.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>pop()</strong></p></td>
<td><p>Experimental. Removes block with specified index from the dataset and returns removed block as the <code class="docutils literal notranslate"><span class="pre">Blocks</span></code> object. Alters object.</p></td>
</tr>
<tr class="row-even"><td><p><strong>representative_points_array()</strong></p></td>
<td><p>Numpy array with representative points - longitude, latitude, and value.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>select_distances_between_blocks()</strong></p></td>
<td><p>Select distances between a given block and all other blocks.</p></td>
</tr>
<tr class="row-even"><td><p><strong>transform_crs()</strong></p></td>
<td><p>Transform Blocks Coordinate Reference System.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="field-list">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>AttributeError</strong><span class="classifier">If both <code class="docutils literal notranslate"><span class="pre">representative_points_from_centroid</span></code> and</span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">representative_points_from_random_sample</span></code> are set to
True.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">PointSupport</span></code></dt><dd><p>Class heavily using <code class="docutils literal notranslate"><span class="pre">Blocks</span></code> for the semivariogram deconvolution.</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyinterpolate</span> <span class="kn">import</span> <span class="n">Blocks</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FILENAME</span> <span class="o">=</span> <span class="s1">&#39;cancer_data.gpkg&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LAYER_NAME</span> <span class="o">=</span> <span class="s1">&#39;areas&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DS</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">LAYER_NAME</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AREA_VALUES</span> <span class="o">=</span> <span class="s1">&#39;rate&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AREA_INDEX</span> <span class="o">=</span> <span class="s1">&#39;FIPS&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AREA_GEOMETRY</span> <span class="o">=</span> <span class="s1">&#39;geometry&#39;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CANCER_DATA</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>   <span class="s1">&#39;ds&#39;</span><span class="p">:</span> <span class="n">DS</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s1">&#39;index_column_name&#39;</span><span class="p">:</span> <span class="n">AREA_INDEX</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s1">&#39;value_column_name&#39;</span><span class="p">:</span> <span class="n">AREA_VALUES</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s1">&#39;geometry_column_name&#39;</span><span class="p">:</span> <span class="n">AREA_GEOMETRY</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">Blocks</span><span class="p">(</span><span class="o">**</span><span class="n">CANCER_DATA</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="go">Index([&#39;FIPS&#39;, &#39;rate&#39;, &#39;geometry&#39;, &#39;rep_points&#39;, &#39;lon&#39;, &#39;lat&#39;],</span>
<span class="go">      dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">block_coordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Hashable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.block_coordinates"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Gets block representative point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_id</strong><span class="classifier">Hashable</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: Point</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">block_indexes</span></span></dt>
<dd><p>Returns index column values.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>: numpy array</dt><dd><p>Block indexes.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">block_real_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Hashable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.block_real_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Gets block total value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_id</strong><span class="classifier">Hashable</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: float</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">block_representative_points</span></span></dt>
<dd><p>Returns block representative coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>: numpy array</dt><dd><p>Block representative coordinates.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">block_values</span></span></dt>
<dd><p>Returns block values.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>: numpy array</dt><dd><p>Block values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calculate_angles_between_rep_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.calculate_angles_between_rep_points"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Angles between all representative points to all other
representative points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>update</strong><span class="classifier">bool, default = True</span></dt><dd><p>Update <code class="docutils literal notranslate"><span class="pre">angles</span></code> attribute.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: Dict</dt><dd><p>block index: angles to other blocks ordered like block
indexes (keys) in a dictionary</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calculate_distances_between_rep_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.calculate_distances_between_rep_points"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Gets distances between representative points within blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>update</strong><span class="classifier">bool, default = True</span></dt><dd><p>Update <code class="docutils literal notranslate"><span class="pre">distances</span></code> attribute.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: DataFrame</dt><dd><p>Columns and indexes are blocks ids, values are
distances between blocks.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_blocks_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indexes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Buffer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_SupportsArray</span><span class="p"><span class="pre">[</span></span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_NestedSequence</span><span class="p"><span class="pre">[</span></span><span class="pre">_SupportsArray</span><span class="p"><span class="pre">[</span></span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">complex</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">_NestedSequence</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">complex</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.get_blocks_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Returns values of observations aggregated within blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>indexes</strong><span class="classifier">Array-like, optional</span></dt><dd><p>Indexes of blocks to get values from. If not given then
all blocks are returned.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: numpy array</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Hashable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.pop"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Removes block with specified index from the dataset and returns
removed block as the <code class="docutils literal notranslate"><span class="pre">Blocks</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_index</strong><span class="classifier">Union[str, Hashable]</span></dt><dd><p>Index of the block to remove.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: Blocks</dt><dd><p>Single block as the Blocks object.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">representative_points_array</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.representative_points_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Returns array with blocks’ representative points.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>: numpy array</dt><dd><p><code class="docutils literal notranslate"><span class="pre">[lon,</span> <span class="pre">lat,</span> <span class="pre">value]</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">select_distances_between_blocks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other_blocks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.select_distances_between_blocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Method selects distances between specified blocks and all other
blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_id</strong></dt><dd><p>Single block ID or list with IDs to retrieve.</p>
</dd>
<dt><strong>other_blocks</strong><span class="classifier">optional</span></dt><dd><p>Other blocks to get distance to those blocks, if not given then
all other blocks are returned.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: numpy array</dt><dd><p>Index is block id, columns are other blocks.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">transform_crs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_crs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/blocks.html#Blocks.transform_crs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Function transforms Blocks CRS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>target_crs</strong><span class="classifier">pyproj.CRS or EPSG code</span></dt><dd><p>The value can be anything accepted by
<code class="xref py py-meth docutils literal notranslate"><span class="pre">pyproj.CRS.from_user_input()</span></code>,
such as an authority string (eg “EPSG:4326”) or a WKT string.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="point-support">
<h2>Point Support<a class="headerlink" href="#point-support" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyinterpolate.</span></span><span class="sig-name descname"><span class="pre">PointSupport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GeoDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Blocks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_value_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points_geometry_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store_dropped_points</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_point_support_crs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_possible_neighbors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support.html#PointSupport"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Class represents ps_blocks and their point support.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>points: gpd.GeoDataFrame</strong></dt><dd><p>Point support data, it should have geometry (Point)
column and value column.</p>
</dd>
<dt><strong>blocks: Blocks</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">Blocks</span></code> object with polygons data.</p>
</dd>
<dt><strong>points_value_column: str</strong></dt><dd><p>The name of the point-support column with points
values (e.g. population).</p>
</dd>
<dt><strong>points_geometry_column: str</strong></dt><dd><p>The name of the point-support column with a
geometry.</p>
</dd>
<dt><strong>store_dropped_points: bool = False</strong></dt><dd><p>Should object store points which weren’t joined
with ps_blocks?</p>
</dd>
<dt><strong>use_point_support_crs: bool = False</strong></dt><dd><p>Should object use point support CRS instead of
ps_blocks CRS? Both CRS are projected into the same
projection, and this parameter decides into which
CRS the data should be reprojected.</p>
</dd>
<dt><strong>no_possible_neighbors</strong><span class="classifier">int, default = 0</span></dt><dd><p>The maximum number of the closest ps_blocks used for
the calculation of distances between point support
coordinates. Default 0 indicates that all ps_blocks are used.</p>
</dd>
<dt><strong>verbose: bool = True</strong></dt><dd><p>Information about the progress of the calculations.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>blocks</strong><span class="classifier">Blocks</span></dt><dd><p>Blocks object with polygons data.</p>
</dd>
<dt><strong>blocks_distances</strong><span class="classifier">numpy array</span></dt><dd><p>Distances between the ps_blocks’ representative points.</p>
</dd>
<dt><strong>blocks_index_column</strong><span class="classifier">str</span></dt><dd><p>Name of the column with block indexes.</p>
</dd>
<dt><strong>dropped_points</strong><span class="classifier">GeoDataFrame, optional</span></dt><dd><p>Points which weren’t joined with ps_blocks (due to the lack of
spatial overlap). Attribute can be None if the parameter
<code class="docutils literal notranslate"><span class="pre">store_dropped_points</span></code> was set to False.</p>
</dd>
<dt><strong>point_support</strong><span class="classifier">GeoDataFrame</span></dt><dd><p>Columns: <code class="docutils literal notranslate"><span class="pre">lon_col_name</span></code>, <code class="docutils literal notranslate"><span class="pre">lat_col_name</span></code>, <code class="docutils literal notranslate"><span class="pre">point-support-value</span></code>, <code class="docutils literal notranslate"><span class="pre">block-index</span></code>.</p>
</dd>
<dt><strong>point_support_blocks_index_name</strong><span class="classifier">str, optional</span></dt><dd><p>Name of the column with block indexes in the point support.
If the column name is not given in the <code class="docutils literal notranslate"><span class="pre">ps_blocks</span></code> object, then
the default name <code class="docutils literal notranslate"><span class="pre">&quot;blocks_index&quot;</span></code> is used.</p>
</dd>
<dt><strong>unique_blocks</strong><span class="classifier">numpy array</span></dt><dd><p>Unique block indexes from the point support.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>lon_col_name</strong></p></td>
<td><p>(str, property) Name of the column with longitude.</p></td>
</tr>
<tr class="row-even"><td><p><strong>lat_col_name</strong></p></td>
<td><p>(str, property) Name of the column with latitude.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>get_distances_between_known_blocks()</strong></p></td>
<td><p>Function returns distances between given ps_blocks.</p></td>
</tr>
<tr class="row-even"><td><p><strong>get_point_to_block_indexes()</strong></p></td>
<td><p>Method returns block indexes for each point in the same order as points are stored in the <code class="docutils literal notranslate"><span class="pre">point_support</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>get_points_array()</strong></p></td>
<td><p>Method returns point coordinates and their values as a numpy array.</p></td>
</tr>
<tr class="row-even"><td><p><strong>point_support_totals()</strong></p></td>
<td><p>Function retrieves total point support values for given ps_blocks.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Notes</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PointSupport</span></code> class structure is designed to store the information
about the points within polygons. During the regularization process,
the inblock semivariograms are estimated from the polygon’s point support,
and semivariances are calculated between point supports of neighbouring
ps_blocks.</p>
<p>The class takes the point support grid and ps_blocks data (polygons).
Then, spatial join is performed and points are assigned to areas where
they fall. The core attribute is <code class="docutils literal notranslate"><span class="pre">point_support</span></code>.
It is a <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> with columns:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lon_col_name</span></code> - a floating representation of longitude,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lat_col_name</span></code> - a floating representation of latitude,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">point-support-value</span></code> - the attribute describing the name of a column
with the point-support’s value,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">block-index</span></code> - the name of a column directing to the block index
values.</p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyinterpolate</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Blocks</span><span class="p">,</span> <span class="n">ExperimentalVariogram</span><span class="p">,</span> <span class="n">PointSupport</span><span class="p">,</span> <span class="n">TheoreticalVariogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyinterpolate.core.data_models.centroid_poisson_kriging</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CentroidPoissonKrigingInput</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FILENAME</span> <span class="o">=</span> <span class="s1">&#39;cancer_data.gpkg&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LAYER_NAME</span> <span class="o">=</span> <span class="s1">&#39;areas&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DS</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">LAYER_NAME</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AREA_VALUES</span> <span class="o">=</span> <span class="s1">&#39;rate&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AREA_INDEX</span> <span class="o">=</span> <span class="s1">&#39;FIPS&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AREA_GEOMETRY</span> <span class="o">=</span> <span class="s1">&#39;geometry&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PS_LAYER_NAME</span> <span class="o">=</span> <span class="s1">&#39;points&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PS_VALUES</span> <span class="o">=</span> <span class="s1">&#39;POP10&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PS_GEOMETRY</span> <span class="o">=</span> <span class="s1">&#39;geometry&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">PS</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">FILENAME</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">PS_LAYER_NAME</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CANCER_DATA</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>   <span class="s1">&#39;ds&#39;</span><span class="p">:</span> <span class="n">DS</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s1">&#39;index_column_name&#39;</span><span class="p">:</span> <span class="n">AREA_INDEX</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s1">&#39;value_column_name&#39;</span><span class="p">:</span> <span class="n">AREA_VALUES</span><span class="p">,</span>
<span class="gp">... </span>   <span class="s1">&#39;geometry_column_name&#39;</span><span class="p">:</span> <span class="n">AREA_GEOMETRY</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">POINT_SUPPORT_DATA</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;ps&#39;</span><span class="p">:</span> <span class="n">PS</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;value_column_name&#39;</span><span class="p">:</span> <span class="n">PS_VALUES</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;geometry_column_name&#39;</span><span class="p">:</span> <span class="n">PS_GEOMETRY</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">Blocks</span><span class="p">(</span><span class="o">**</span><span class="n">CANCER_DATA</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ps</span> <span class="o">=</span> <span class="n">PointSupport</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">points</span><span class="o">=</span><span class="n">POINT_SUPPORT_DATA</span><span class="p">[</span><span class="s1">&#39;ps&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">ps_blocks</span><span class="o">=</span><span class="n">BLOCKS</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">points_value_column</span><span class="o">=</span><span class="n">POINT_SUPPORT_DATA</span><span class="p">[</span><span class="s1">&#39;value_column_name&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">points_geometry_column</span><span class="o">=</span><span class="n">POINT_SUPPORT_DATA</span><span class="p">[</span><span class="s1">&#39;geometry_column_name&#39;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ps</span><span class="o">.</span><span class="n">unique_blocks</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
<span class="go">[42049. 42039.]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_distances_between_known_blocks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support.html#PointSupport.get_distances_between_known_blocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Function returns distances between known ps_blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_ids</strong><span class="classifier">Union[List, np.ndarray]</span></dt><dd><p>List with block indexes.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: numpy array</dt><dd><p>Distances from ps_blocks to all other ps_blocks (ordered the same way
as input <code class="docutils literal notranslate"><span class="pre">block_ids</span></code> list, where rows and columns represent
the block indexes).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_point_to_block_indexes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Series</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support.html#PointSupport.get_point_to_block_indexes"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Method returns block indexes for each point in the same order as
points are stored in the <code class="docutils literal notranslate"><span class="pre">point_support</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>: pandas Series</dt><dd><p>((point support index: block index))</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_points_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support.html#PointSupport.get_points_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Method returns point coordinates and their values as a numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_id</strong><span class="classifier">Any</span></dt><dd><p>Block for which points should be retrieved, if not given then all
points are returned.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: numpy array</dt><dd><p>((lon_col_name, lat_col_name, value))</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">point_support_totals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blocks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support.html#PointSupport.point_support_totals"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Function retrieves total point support values for given ps_blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>blocks</strong><span class="classifier">Iterable</span></dt><dd><p>Block indexes.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: numpy array</dt><dd><p>Retrieved values.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyinterpolate.</span></span><span class="sig-name descname"><span class="pre">PointSupportDistance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support_distances.html#PointSupportDistance"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Class calculates and stores distances between point supports of multiple
blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>verbose</strong><span class="classifier">bool, default = True</span></dt><dd><p>Show progress.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>weighted_block_to_block_distances</strong><span class="classifier">DataFrame</span></dt><dd><p>Indexes: block indexes, Columns: block indexes, Cells: distances.</p>
</dd>
<dt><strong>distances_between_point_supports</strong><span class="classifier">Dict</span></dt><dd><p><code class="docutils literal notranslate"><span class="pre">(block_a,</span> <span class="pre">block_b):</span> <span class="pre">[[value_a(i),</span> <span class="pre">value_b(j),</span> <span class="pre">distance(i-j)],</span> <span class="pre">...]</span></code></p>
</dd>
<dt><strong>no_closest_neighbors</strong><span class="classifier">int</span></dt><dd><p>Number of closest neighbors for each block.</p>
</dd>
<dt><strong>closest_neighbors</strong><span class="classifier">Dict</span></dt><dd><p>Block id: [the closest blocks].</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>calc_pair_distances()</strong></p></td>
<td><p>Returns distances between point supports from two blocks and updates distances dictionary.</p></td>
</tr>
<tr class="row-even"><td><p><strong>calculate_point_support_distances()</strong></p></td>
<td><p>Calculates distances between point supports.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>calculate_weighted_block_to_block_distances()</strong></p></td>
<td><p>Calculates weighted distances between blocks using their point supports.</p></td>
</tr>
<tr class="row-even"><td><p><strong>get_weighted_distance()</strong></p></td>
<td><p>Returns weighted distance to a block.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>AttributeError</dt><dd><p>When weighted block to block distances are not calculated and user
wants to find closest neighbors (using
<code class="docutils literal notranslate"><span class="pre">calculate_point_support_distances()</span></code> method with
<code class="docutils literal notranslate"><span class="pre">no_closest_neighbors</span></code> &gt; 0).</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calc_pair_distances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point_support</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_pair</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support_distances.html#PointSupportDistance.calc_pair_distances"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Returns distances between point supports from two blocks and
updates distances dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>point_support</strong><span class="classifier">PointSupport</span></dt><dd><p>Blocks and their point supports.</p>
</dd>
<dt><strong>block_pair</strong><span class="classifier">Tuple</span></dt><dd><p>(block_a, block_b)</p>
</dd>
<dt><strong>update</strong><span class="classifier">bool, default = True</span></dt><dd><p>If True then distances are updated in the distances’ dictionary.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: numpy array</dt><dd><p>Distances between point supports from two blocks.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calculate_point_support_distances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point_support</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_closest_neighbors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support_distances.html#PointSupportDistance.calculate_point_support_distances"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Calculates distances between point supports.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>point_support</strong><span class="classifier">PointSupport</span></dt><dd><p>Blocks and their point supports.</p>
</dd>
<dt><strong>block_id</strong><span class="classifier">int</span></dt><dd><p>The unique id of a block.</p>
</dd>
<dt><strong>no_closest_neighbors</strong><span class="classifier">int, default = 0</span></dt><dd><p>Number of the closest neighbors. If default then all distances
are returned.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: Dict</dt><dd><p>Dictionary with distances between point supports of a given
block and its neighbors.
Key is a block pair, and value is a numpy array with distances,
where each row represents a point from a given block and each
column represents a point from its neighbor.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calculate_weighted_block_to_block_distances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point_support</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_distances</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support_distances.html#PointSupportDistance.calculate_weighted_block_to_block_distances"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Calculates weighted distances between blocks using their
point supports.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>point_support</strong><span class="classifier">PointSupport</span></dt><dd><p>Blocks and their point supports.</p>
</dd>
<dt><strong>return_distances</strong><span class="classifier">bool, default = False</span></dt><dd><p>Should return DataFrame with distances?</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: pd.DataFrame</dt><dd><p>Indexes: block indexes, Columns: block indexes, Cells: distances.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_weighted_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Series</span></span></span><a class="reference internal" href="../../_modules/pyinterpolate/core/data_models/point_support_distances.html#PointSupportDistance.get_weighted_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Returns weighted distance to a block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>block_id</strong><span class="classifier">Union[Hashable, str]</span></dt><dd><p>Block unique index.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>: pd.Series</dt><dd><p>Weighted distances between the block and other blocks centroids.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../api.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">API</p>
      </div>
    </a>
    <a class="right-next"
       href="../distance/distance.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Distance</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#blocks">Blocks</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#point-support">Point Support</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/core/core.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Szymon Moliński.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>